!function(e){function n(r){if(t[r])return t[r].exports;var u=t[r]={exports:{},id:r,loaded:!1};return e[r].call(u.exports,u,u.exports,n),u.loaded=!0,u.exports}var t={};return n.m=e,n.c=t,n.p="/",n(0)}([function(e,n,t){"use strict";function r(e,n){e.enemies.length>n.enemies.length&&c["default"].invaderDiesSound.play()}var u=t(2)["default"],o=t(3)["default"],i=t(5)["default"],a=t(4),c=i(a),l=t(8),s=i(l),f=t(10),d=i(f),y=c["default"].canvas;s["default"].addListeners(),window.addEventListener("load",function(){function e(e){l.fillStyle=e.color,l.fillRect(e.x,e.y,e.w,e.h)}function n(e){l.drawImage(f,e.x,e.y)}function t(e){l.drawImage(p,e.x,e.y)}function i(r,u){l.clearRect(0,0,y.width,y.height),r.enemies.map(function(e){return t(e)}),r.enemyBullets.concat(r.playerBullets).map(function(n){return e(n)}),r.particles.map(function(n){return e(n)}),r.player&&!r.playerDying&&n(r.player),requestAnimationFrame(function(){return a(r,u)})}function a(e,n){var t=(new Date).getTime(),a=t-(n||t),c=u({},s["default"]);o(c);var l=e.updateIfGameIsRunning(c,a);r(e,l),i(l,t)}var l=void 0,f=document.getElementById("player"),p=document.getElementById("invader");void 0===y.getContext?console.error("browser does not support canvas"):l=y.getContext("2d"),y.width=800,y.height=600,i((0,d["default"])({inputs:c["default"]}),void 0)})},function(e,n){var t=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=t)},function(e,n,t){e.exports={"default":t(11),__esModule:!0}},function(e,n,t){e.exports={"default":t(12),__esModule:!0}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={canvas:document.getElementById("screen"),status:document.getElementById("status"),playerShootSound:document.getElementById("player-shoots"),invaderShootSound:document.getElementById("invader-shoots"),invaderDiesSound:document.getElementById("invader-explodes"),playerDiesSound:document.getElementById("player-explodes")},e.exports=n["default"]},function(e,n){"use strict";n["default"]=function(e){return e&&e.__esModule?e:{"default":e}},n.__esModule=!0},function(e,n,t){var r=t(17),u=t(1),o=t(15),i="prototype",a=function(e,n,t){var c,l,s,f=e&a.F,d=e&a.G,y=e&a.S,p=e&a.P,v=e&a.B,m=e&a.W,g=d?u:u[n]||(u[n]={}),x=d?r:y?r[n]:(r[n]||{})[i];d&&(t=n);for(c in t)l=!f&&x&&c in x,l&&c in g||(s=l?x[c]:t[c],g[c]=d&&"function"!=typeof x[c]?t[c]:v&&l?o(s,r):m&&x[c]==s?function(e){var n=function(n){return this instanceof e?new e(n):e(n)};return n[i]=e[i],n}(s):p&&"function"==typeof s?o(Function.call,s):s,p&&((g[i]||(g[i]={}))[c]=s))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,e.exports=a},function(e,n){e.exports=function(e){try{return!!e()}catch(n){return!0}}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={rightPressedKey:!1,leftPressedKey:!1,spacePressedKey:!1,rPressedKey:!1,addListeners:function(){var e=this;document.addEventListener("keyup",function(n){37===n.keyCode?e.leftPressedKey=!1:39===n.keyCode?e.rightPressedKey=!1:32===n.keyCode?e.spacePressedKey=!1:82===n.keyCode&&(e.rPressedKey=!1)}),document.addEventListener("keydown",function(n){37===n.keyCode?e.leftPressedKey=!0:39===n.keyCode?e.rightPressedKey=!0:32===n.keyCode?e.spacePressedKey=!0:82===n.keyCode&&(e.rPressedKey=!0)})}},e.exports=n["default"]},function(e,n,t){"use strict";function r(e,n){return function(t,r){var u=y({},n);return u[t]=r,e(u)}}function u(e,n){return function(t){var r=y({},n),u=y(r,t);return e(u)}}function o(e,n){for(var t=arguments,r=!0;r;){var u=e,o=n;r=!1;for(var i=t.length,a=Array(i>2?i-2:0),c=2;i>c;c++)a[c-2]=t[c];if(u())return o();if(!(a.length>1)){if(1===a.length)return a[0]();throw"no matching values"}t=a,e=t[0],n=t[1],r=!0,i=a=c=void 0}}function i(e,n){var t=y([],e);return t.push(n),p(t),t}function a(e){var n=e.x,t=void 0===n?x.width/2:n,o=r(a,e),i=u(a,e),c=p({x:t,y:x.height-50,w:55,h:34,color:"blue",assoc:o,merge:i,update:function(){return c}});return c}function c(e){var n=e.x,t=e.y,o=r(c,e),i=u(c,e),a=p({x:n,y:t,w:25,h:25,color:"white",assoc:o,merge:i,update:function(e,t){return o("x",n+e*t)}});return a}function l(e){var n=e.x,t=e.y,o=e.d,i=e.color,a=r(l,e),c=u(l,e),s=p({x:n,y:t,w:5,h:5,d:o,color:i,assoc:a,merge:c,update:function(e){return a("y",t+o*e)}});return s}function s(e){var n=e.x,t=e.y;return l({x:n,y:t,d:-.2,color:"yellow"})}function f(e){var n=e.x,t=e.y;return l({x:n,y:t,d:.2,color:"red"})}function d(e){var n=e.x,t=e.y,o=e.vx,i=e.vy,a=e.color,c=r(d,e),l=u(d,e),s=p({x:n,y:t,vx:o,vy:i,w:3,h:3,assoc:c,merge:l,color:a,update:function(e){return l({x:s.x+s.vx*e,y:s.y+s.vy*e,vx:s.vx,vy:s.vy+h*e})}});return s}var y=t(2)["default"],p=t(3)["default"],v=t(5)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n.AssocMixin=r,n.MergeMixin=u,n.cond=o,n.conj=i,n.Player=a,n.Enemy=c,n.Bullet=l,n.PlayerBullet=s,n.EnemyBullet=f,n.Particle=d;var m=t(4),g=v(m),x=g["default"].canvas,h=.001},function(e,n,t){"use strict";function r(e,n){var t=e.x<n.x+n.w,r=n.x<e.x+e.w,u=e.y+e.h>n.y,o=n.y+n.h>e.y;return t&&r&&u&&o}function u(e){return Array.apply(null,Array(e))}function o(e,n){return n>e?c(u(n-e).map(function(n,t){return e+t})):[e]}function i(){var e=o(0,8);return e.map(function(n){return e.map(function(e){return(0,s.Enemy)({x:45*n,y:20+45*e})})}).reduce(function(e,n){return e.concat(n)})}function a(e){function n(e){return(0,s.cond)(function(){return e.leftPressedKey===!0&&X.x>0},function(){return-1},function(){return e.rightPressedKey===!0&&X.x<O.canvas.width-55},function(){return 1},function(){return 0})}function t(e,t){return $("player",(0,s.cond)(function(){return X},function(){return X.assoc("x",X.x+.5*n(e)*t)},function(){return!1}))}function u(e,n){return(0,s.cond)(function(){return e.spacePressedKey===!0},function(){return t(e,n).playerShoots()},function(){return t(e,n)})}function f(n){return n.rPressedKey?a({args:e}):ne}function d(e,n){var t=f(e);return k?t.updateGameLoop(e,n):t}function y(e){return e.filter(function(e){return e.x>0&&e.y>0&&e.x<O.canvas.width&&e.y<O.canvas.height})}function p(e){return ee({playerBullets:y(L.map(function(n){return n.update(e)})),enemyBullets:y(G.map(function(n){return n.update(e)})),particles:y(W.map(function(n){return n.update(e)})),player:X.update(),enemies:q.map(function(n){return n.update(Z,e)})})}function v(){return O.playerShootSound.play(),(0,s.conj)(L,(0,s.PlayerBullet)({x:X.x+X.w/2,y:X.y}))}function m(){var e=(0,s.cond)(function(){return 0===J},v,function(){return L}),n=(0,s.cond)(function(){return J>0},function(){return J-1},function(){return U}),t=ee({playerBulletNframeCounter:n,playerBullets:e});return t}function g(){var e=Math.floor(Math.random()*(q.length-1)),n=q[e],t=l([],G),r=(0,s.EnemyBullet)({x:n.x,y:n.y});t.push(r),O.invaderShootSound.play();var u=$("enemyBullets",t);return u}function x(){return 20*Math.random()<=1?g():ne}function h(){return O.status.innerHTML="You lose",ee({gameRunning:!1,playerDying:!1,enemies:[],enemyBullets:[],playerBullets:[],particles:[],player:!1})}function B(){return O.status.innerHTML="You win",ee({gameRunning:!1,playerDying:!1,enemies:[],playerBullets:[],enemyBullets:[],particles:[]})}function w(){var e=Z,n=q,t=10,r=k;if(q.length>0){var u=q[0].x,o=q[q.length-1].x+q[0].w;(0>u||o>O.canvas.width)&&(e=-1*e,n=q.map(function(e){var n=e.y+t;return e.assoc("y",n)}));var i=n.some(function(e){return e.y>500});if(i&&!A)return h();var a=ee({velX:e,enemies:n,gameRunning:r});return a}return null}function b(e){return q.reduce(function(n,t){return n||(r(t,e)?t:null)},null)}function P(e,n){return e+(n-e)*Math.random()}function S(e,n){var t=o(0,5);return t.map(function(){return n.push((0,s.Particle)({x:e.x,y:e.y,vx:P(-.1,.1),vy:P(-.5,0),color:"rgba(255, 255, 255,"+Math.random()+")"}))})}function M(e,n){var t=o(0,60);return t.map(function(){return n.push((0,s.Particle)({x:e.x+15,y:e.y-15,vx:P(-.4,.4),vy:P(-3.5,0),color:"rgba(0, 255, 0, 255)"}))})}function j(){if(!k||A)return ne;var e=function(){var e=[];if(G.some(function(e){return r(e,X)})){M(X,e);var n=ee({playerDying:!0,particles:W.concat(e)});return{v:n}}var t=k,u=[],o=[];L.forEach(function(n){var t=b(n);t&&(u.push(t),o.push(n),S(n,e))});var i=L.filter(function(e){return-1===o.indexOf(e)}),a=q.filter(function(e){return-1===u.indexOf(e)});if(0===a.length)return{v:B()};var n=ee({gameRunning:t,playerBullets:i,enemies:a,particles:W.concat(e)});return{v:n}}();return"object"==typeof e?e.v:void 0}function E(e,n){return A?0==W.length?h():p(n).enemyCollisionWithBorder().enemyShootsAI().bulletCollision():u(e,n).updateBodies(n).enemyCollisionWithBorder().enemyShootsAI().bulletCollision()}var O=e.inputs,_=e.x,C=void 0===_?0:_,I=e.y,K=void 0===I?0:I,D=e.gameRunning,k=void 0===D?!0:D,R=e.playerDying,A=void 0===R?!1:R,F=e.playerBullets,L=void 0===F?[]:F,N=e.enemyBullets,G=void 0===N?[]:N,T=e.particles,W=void 0===T?[]:T,z=e.enemies,q=void 0===z?i():z,H=e.player,X=void 0===H?(0,s.Player)({}):H,Y=e.playerBulletNframeCounter,J=void 0===Y?0:Y,Q=e.playerFinalBulletNframeCount,U=void 0===Q?10:Q,V=e.velX,Z=void 0===V?.2:V,$=(0,s.AssocMixin)(a,e),ee=(0,s.MergeMixin)(a,e);c(q),c(L),c(G),c(W);var ne=c({x:C,y:K,gameRunning:k,playerDying:A,enemyBullets:G,playerBullets:L,particles:W,enemies:q,playerFinalBulletNframeCount:U,playerBulletNframeCounter:J,player:X,updateIfGameIsRunning:d,bulletCollision:j,enemyCollisionWithBorder:w,enemyShootsAI:x,updateBodies:p,playerShoots:m,updateGameLoop:E,assoc:$,merge:ee});return ne}var c=t(3)["default"],l=t(2)["default"];Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var s=t(9);e.exports=n["default"]},function(e,n,t){t(24),e.exports=t(1).Object.assign},function(e,n,t){t(25),e.exports=t(1).Object.freeze},function(e,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,n,t){var r=t(13);e.exports=function(e,n,t){if(r(e),void 0===n)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,u){return e.call(n,t,r,u)}}return function(){return e.apply(n,arguments)}}},function(e,n){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,n){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e,n,t){var r=t(14);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,n){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,n){var t=Object;e.exports={create:t.create,getProto:t.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:t.getOwnPropertyDescriptor,setDesc:t.defineProperty,setDescs:t.defineProperties,getKeys:t.keys,getNames:t.getOwnPropertyNames,getSymbols:t.getOwnPropertySymbols,each:[].forEach}},function(e,n,t){var r=t(20),u=t(23),o=t(18);e.exports=t(7)(function(){var e=Object.assign,n={},t={},r=Symbol(),u="abcdefghijklmnopqrst";return n[r]=7,u.split("").forEach(function(e){t[e]=e}),7!=e({},n)[r]||Object.keys(e({},t)).join("")!=u})?function(e,n){for(var t=u(e),i=arguments,a=i.length,c=1,l=r.getKeys,s=r.getSymbols,f=r.isEnum;a>c;)for(var d,y=o(i[c++]),p=s?l(y).concat(s(y)):l(y),v=p.length,m=0;v>m;)f.call(y,d=p[m++])&&(t[d]=y[d]);return t}:Object.assign},function(e,n,t){var r=t(6),u=t(1),o=t(7);e.exports=function(e,n){var t=(u.Object||{})[e]||Object[e],i={};i[e]=n(t),r(r.S+r.F*o(function(){t(1)}),"Object",i)}},function(e,n,t){var r=t(16);e.exports=function(e){return Object(r(e))}},function(e,n,t){var r=t(6);r(r.S+r.F,"Object",{assign:t(21)})},function(e,n,t){var r=t(19);t(22)("freeze",function(e){return function(n){return e&&r(n)?e(n):n}})}]);